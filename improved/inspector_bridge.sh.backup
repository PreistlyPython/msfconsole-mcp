#!/usr/bin/bash

# MCP Inspector Bridge for Improved Metasploit MCP
# This script acts as a bridge between the MCP Inspector and our improved Metasploit MCP

# Display helpful information
echo "Starting MCP Inspector Bridge for Improved Metasploit MCP"
echo "-------------------------------------------------------"

# Set correct environment variables
export PYTHONPATH="/home/dell/coding/mcp:/home/dell/coding/mcp/msfconsole:/home/dell/coding/mcp/msfconsole/improved:$PYTHONPATH"

# Activate the virtual environment
source /home/dell/coding/mcp/msfconsole/venv/bin/activate || {
    echo "Failed to activate virtual environment"
    exit 1
}

# Print debugging information
echo "Python Version: $(python --version)"
echo "Virtual Environment: $(which python)"
echo "PYTHONPATH: $PYTHONPATH"
echo "Working Directory: $(pwd)"

# Change to the improved directory
cd /home/dell/coding/mcp/msfconsole/improved

# Check if the main script exists
if [ ! -f "msfconsole_mcp_improved.py" ]; then
    echo "Error: msfconsole_mcp_improved.py not found"
    exit 1
fi

# Make sure the script is executable
chmod +x msfconsole_mcp_improved.py

# Execute the Python script
echo "Launching Improved Metasploit MCP..."
exec python msfconsole_mcp_improved.py
echo "Checking Metasploit..." >&2
